---
---

/*
 * This file controls what is imported from /_sass
 *
 * Note that the files are processed in the order they are imported, so they are partly
   sorted by the dependencies. Also, the first two lines of the file are required by Jekyll.
 */

@import
    "vendor/breakpoint/breakpoint",

    "themes",
    "theme/{{ site.site_theme | default: 'default' | append: '_light' }}",
    "theme/{{ site.site_theme | default: 'default' | append: '_dark' }}",

    "include/mixins",
    "vendor/susy/susy",

    "layout/reset",
    "layout/base",

    "include/utilities",
    "layout/tables",
    "layout/buttons",
    "layout/notices",
    "layout/masthead",
    "layout/navigation",
    "layout/footer",
    "syntax",

    "layout/forms",

    "layout/page",
    "layout/archive",
    "layout/sidebar",
    "layout/json_cv",

    "vendor/font-awesome/fontawesome",
    "vendor/font-awesome/solid",
    "vendor/font-awesome/brands"
;
/* === FINAL: fix avatar to true circle & remove theme ring === */

/* 外层容器：强制正方形，裁剪为圆 */
.sidebar .author__avatar {
  width: 220px !important;          /* 调整大小：200–240 均可 */
  height: 220px !important;         /* 必须与 width 相同 */
  padding: 0 !important;            /* 避免被 padding 挤成椭圆 */
  margin: 0 auto;
  border: none !important;
  box-shadow: none !important;
  border-radius: 50% !important;    /* 外层裁成圆 */
  overflow: hidden !important;      /* 超出裁掉 */
  position: relative;
  display: block;
  aspect-ratio: 1 / 1 !important;   /* 再保险：保持 1:1 */
}

/* 主题用于画外圈的伪元素：直接禁用（不然会撑成椭圆） */
.sidebar .author__avatar::before,
.sidebar .author__avatar::after {
  content: none !important;
  display: none !important;
}

/* 头像图片：等比填充，不拉伸 */
.sidebar .author__avatar img {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;     /* 居中裁剪，不变形 */
  object-position: center center;
  border-radius: 50% !important;    /* 图片也裁成圆（双保险） */
  display: block;
}

/* 额外保险：无论容器是否被别的规则影响，都按圆形裁剪 */
.sidebar .author__avatar,
.sidebar .author__avatar img {
  clip-path: circle(50% at 50% 50%);
}


